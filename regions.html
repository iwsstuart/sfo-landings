<!DOCTYPE html>
<html>
<meta charset="utf-8">
<style>

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, input, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    margin: 0;
    padding: 0;
    font-weight: normal;
    text-decoration:none;
    color:inherit;
    list-style: none;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
  font: 10px sans-serif;
  margin: 0;
}

#map { 
/*	width: calc(100% - 200px);
	position: absolute;
	left: 210px;*/
}

</style>
<body>

<script src="//d3js.org/d3.v3.min.js"></script>

<!-- World map data, if saved as variable in external file -->
<script src="world.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://use.typekit.net/bwy0xzf.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
<script>

var width = window.innerWidth, height = window.innerHeight;

console.log(width);

var svg = d3.select('body')
            .append( "svg" )
            .attr( "width", width )
            .attr( "height", height );

var worldmap = svg.append('g');
var regionPoints = svg.append('g');

var mercatorProj = d3.geo.mercator()
  .scale( 150 )
  .center( [0, 0] )
  .translate( [width/2,height/2] );

var geoPath = d3.geo.path()
  .projection( mercatorProj );

var regions = [
  { "coords": [100.5, 28.5], "region": "Asia" },
  { "coords": [153.5, -17.5], "region": "Australia / Oceania" },
  { "coords": [-96.5, 62.5], "region": "Canada" },
  { "coords": [-85, 12.5], "region": "Central America" },
  { "coords": [25.4, 54.5], "region": "Europe" },
  { "coords": [-100, 20], "region": "Mexico" },
  { "coords": [48.5, 31], "region": "Middle East" },
  { "coords": [-56.8, -12.8], "region": "South America" },
  { "coords": [-99.5, 39.5], "region": "US" }
];

d3.json("world.json", function(error, data) {

  worldmap.selectAll( "path" )
    .data( data.features )
    .enter()
    .append( "path" )
    .attr( "fill", "#777" )
    .attr( "d", geoPath );
  
});

regionPoints.selectAll('circle')
  .data(regions)
  .enter()
  .append("circle")
  .attr('fill', '#000')
  .attr('r', '10px')
  .attr('cx', function(d) {
    return mercatorProj(d.coords)[0]; 
  })
  .attr('cy', function(d) { 
    return mercatorProj(d.coords)[1]; 
  });
  

</script>


</body>
</html>